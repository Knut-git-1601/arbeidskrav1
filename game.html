<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arbeidskrav 1!</title>
    <link rel="stylesheet" href="game.css" />
  </head>
  <!-- HTML KODEN TRENGER DU IKKE RØRE FOR Å LØSE OPPGAVENE. -->

  <body>
    <div class="main-container">
      <!-- Healthbars til heroene -->
      <div class="hero-health-containers">
        <div class="healthbar-container">
          <!-- healer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar healer-health"></div>
          <div class="text-container">
            <p id="healer-name-txt">Healerens navn</p>
            <p id="healer-health-txt">400 / 400 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- archer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar archer-health"></div>
          <div class="text-container">
            <p id="archer-name-txt">Archerens navn</p>
            <p id="archer-health-txt">600 / 600 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- warrior-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar warrior-health"></div>
          <div class="text-container">
            <p id="warrior-name-txt">Warriorens navn</p>
            <p id="warrior-health-txt">800 / 800 HP</p>
          </div>
        </div>
      </div>

      <!-- Healthbar til fienden -->
      <div class="dragon-health-container">
        <div class="healthbar-container">
          <!-- dragon-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar dragon-health"></div>
          <div class="text-container">
            <p id="dragon-name-txt">Dragens navn</p>
            <div class="text-container dragon-health-txt">2000 / 2000 HP</div>
          </div>
        </div>
      </div>

      <!-- Bildecontainere for heroene -->
      <div class="img-container healer">
        <img class="hero" src="assets/healer.png" />
      </div>
      <div class="img-container archer">
        <img class="hero" src="assets/archer.png" />
      </div>
      <div class="img-container warrior">
        <img class="hero" src="assets/warrior.png" />
      </div>

      <!-- Bildecontainer for fienden -->
      <div class="enemy-container">
        <div class="img-container dragon-container">
          <img class="dragon" src="assets/dragon.png" />
        </div>
      </div>
    </div>


    <script>
      
      
      //Denne JS-koden er laget klar for deg. Den trenger du ikke endre på.

      //Stats for heroes
      let heroesArray = [
        {
          id: 0,
          name: "Henriette Healer",
          maxHP: 400,
          currentHP: 400,
          damage: 100,
          alive: true,
        },
        {
          id: 1,
          name: "Ariana archer",
          maxHP: 500,
          currentHP: 500,
          damage: 400,
          alive: true,
        },
        {
          id: 2,
          name: "Wyona Warrior",
          maxHP: 600,
          currentHP: 600,
          damage: 400,
          alive: true,
        },
      ];

      let dragonObject = {
        name: "Daar Dragon",
        maxHP: 2000,
        currentHP: 2000,
        damage: 200,
        alive: true,
      };

      // Funksjonskrav 1 
                                                                // Når brukeren trykker på en av heltene, skal helten angripe dragen
                                                                // Det skal komme en alert hvor det står:
                                                                // (Heltens name) har gjort (heltens damage) skade på (Dragens
                                                                // name)!”
                                                                // Dragens liv (currentHP) skal bli trukket med heltens damage, 
                                                                // avhengig av hvilken helt den ble angrepet av.
                                                                // Dragens currentHP blir oppdatert i arrayet

                                                                // Når brukeren trykker på en av heltene, skal helten agripe 
                                                                // dragen
  document.addEventListener(`DOMContentLoaded`, (event) => {    // Legger til en event listener som venter på at alle dokumentet(HTML) skal
                                                                // være ferdig lastet.Dette sikrer at all HTML er lastet inn før scriptet 
                                                                // kjøres
    
                                                                        //Referanse til helseindikatorene i HTML
  const dragonHealthTxT = document.querySelector(`.dragon-health-txt`); // Henter referansen til elementet som viser dragens nåværende helse,
                                                                        // slik at teksten kan oppdateres senere når dragen tar skade
        
  function attackHero(hero) {                                   // Definerer en funksjon "attackHero" som håndterer logikken når en helt angriper dragen
    
    if (!dragonObject.alive || !hero.alive) {                   // Sjekker om dragen eller helten er død. Hvis død, helten ikke angripe
      alert(`${hero.name} kan ikke angripe fordi ${hero.alive ? `dragen` : `helten`} er død!`); // Viser en melding om at helten ikke kan angripe fordi 
                                                                                                // enten dragen eller helten er død.
      return;                                                                                   // Avslutter funksjonen tidlig ved å bruke `return`
    }
      dragonObject.currentHP -= hero.damage;                    // Beregner skade på dragen: Trekker skaden ("hero.damage") fra dragens nåværende helse ("dragonObject.currentHP")
      if (dragonObject.currentHP <= 0) {                        // Sjekker om dragen er død. Hvis dragen er død, vil "dragonObject.currentHP" være 0 eller mindre
        dragonObject.currentHP = 0;                             // Setter dragens helse til 0 Ifor å unngå negative verdier) og markerer dragen som død
        dragonObject.alive = false;                             // Markerer dragen som død
        alert(`${hero.name} har drept ${dragonObject.name}!`)   // Viser en melding om at helten har drept dragen
        dragonHealthTxt.textContent = `0 / 2000 HP`;            // Oppdaterer teksten som viser dragens helse for å reflektere endringene etter angrepet
      } else {                                                  // Hvis dragen ikke er død, vis en melding om at helten har angrepet dragen (helsen er over 0)
        alert(`${hero.name} har gjort ${hero.damage} skade på ${dragonObject.name}!`);  // Viser en melding om at helten har angrepet dragen
        dragonHealthTxt.textContent =  `${ dragonObject.currentHP } / ${dragonObject.maxHP̋} HP ` ; // Oppdaterer teksten som viser dragens helse for å reflektere endringene etter angrepet
        }                                                             // Lukker ` attackHero ` funksjonen
      }                                                               // Lukker if-en                                                      
  });

    heroesArray.forEach(hero => {                               // Legg til event listeners for hver helt. Går igjennom hvert `hero`-objekt i med `forEach`metoden` 
      const heroElement = document.getElementById(hero.name.toLowerCase().replace(` `, `-`)); // Henter DOM elementet for hver helt basert på heltenes navn. Forutsetter at ID-en for hver helt
      if (heroElement) {                                        // Sjekker om elementet eksisterer. Hvis ikke, vil `heroElement` være `null` og `addEventListener` vil kaste en feil
        heroElement.addEventListener(`click`, () => attackHero(hero));                          // Legg til en `click`-event listener til hver helt. Når en helt blir klikket på vil `attackHero`- funksjonen
      }                                                                                         // bli kalt med den relevante helten som argument
    });                                                                                         // Lukker `forEach`løkken

    function checkIfDragonDead() {
      if (!dragonObject.alive) {                                  // Sjekker om dragen er død etter angrepet
        alert(`Gratulerer! Dere har vunnet!`);                  // Viser en melding om at helten har drept dragen
  }
}                                                               // Lukker `DOMContentLoaded - event listeneren

    </script>
  </body>
</html>
